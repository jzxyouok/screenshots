<view class="letter-container">

  <scroll-view scroll-y
              bindtouchmove="hiddenOperate"
              bindtap='hiddenOperate'
              bindscrolltoupper="upper" 
              bindscrolltolower="lower"
              scroll-top="{{scrollTop}}" 
              bindscroll="scroll" 
              wx:for="{{chatList}}" 
              wx:key="{{item}}"
              class='letter-content'>
    <block wx:if="{{item.data_type==0}}">
      <view class="scroll-view-item">
        <view class='user-left'>
          <view class='left-content-avatar'>
            <image src='{{item.user.avatar}}'></image>
          </view>
          <view class='left-content'>

            <view class='left-content-message'>
            <view class="qipao"></view>
              <view wx:if="{{item.message.type==1}}" 
                    class='left-content-item'>{{item.message.content}}</view>
              <view class='left-content-item' 
                    wx:if="{{item.message.type==2}}">
                <image mode='widthFix' 
                      bindtap='previewImage'
                      id="{{item.message.content}}"
                      src="{{item.message.content}}"></image>
              </view>
            </view>
            
          </view>
        </view>
      </view>
    </block>

    <block wx:if="{{item.data_type==1}}">
      <view class="scroll-view-item">
        <view class='user-right'>
          <view class='right-content' bindlongpress="deleteContent">
            
            <!--文字消息 -->
            <view class='right-content-message' wx:if="{{item.message.type==1}}">
              <view class='right-content-item-txt'>{{item.message.content}}</view>
              <view class="qipao"></view>
            </view>

            <!-- 图片 -->
            <view class='right-content-message' wx:if="{{item.message.type==2}}">
              <view class='right-content-item-img'>
                <image mode='widthFix' bindtap='previewImage' src="{{item.message.content}}"></image>
              </view>
            </view>

            <!-- 发红包 -->
            <view class='right-content-message' wx:if="{{item.message.type==5}}">
              <view class='right-content-item-red'>
                <view class='red-content'>
                  <view class='red-packet-image'><image src='/images/rp.png'></image></view>
                  <view class='red-packet-world'>{{item.message.content}}</view>
                </view>
                <view class='red-packet-title'>微信红包</view>
              </view>
              <view class="red-qipao"></view>
            </view>

            <!-- 领红包 -->
            <view class='right-content-message' wx:if="{{item.message.type==6}}">
              <view class='right-content-item-red'>
                <view class='red-content'>
                  <view class='red-packet-image'><image src='/images/rp.png'></image></view>
                  <view class='red-packet-world'>{{item.message.content}}</view>
                </view>
                <view class='red-packet-title'>微信红包</view>
              </view>
              <view class="red-qipao"></view>
            </view>

          </view>
          <view class='right-content-avatar'>
            <image src='{{item.user.avatar}}'></image>
          </view>
        </view>
      </view>
    </block>
  </scroll-view>

  <!-- 底部操作输入 -->
  <view class='footer'>
    <view class='footer-content' bindtap='operate'>
      <view class='sound-icon'>
        <image src='/images/wx-sound.png'></image>
      </view>
      <view class='textarea'>
        <textarea class='txt'
                  maxlength="1024" 
                  fixed="true"
                  cursor-spacing="10"
                  auto-height/>
      </view>
      <view class='left-wx-icon'>
        <image src='/images/wx-face.png'></image>
        <image src='/images/wx-add.png'></image>
      </view>
    </view>

    <!-- 添加成员 -->
    <view class='chat-members' wx:if="{{showOperate}}">
      <view class='member'>
        <view class='title'>添加聊天成员</view>
        <view class='member-content'>
          <view class='member-left'>
            <view class='select-member' data-type='0' bindtap='selectChatUser'>
              <image src='/images/select-icon.png' wx:if="{{selectUser!=0}}"></image>
              <image src='/images/select-choose.png' wx:if="{{selectUser==0}}"></image>
            </view>
            <view class='member-view'>
              <view class='member-avatar'>
                <image src='/images/select-image.png' 
                      wx:if="{{leftUser.avatar==''}}" 
                      data-type='0' 
                      bindtap='selectImage'></image>
                <image src='{{leftUser.avatar}}' 
                      mode='aspectFill' 
                      wx:if="{{leftUser.avatar!=''}}" 
                      data-type='0' 
                      bindtap='selectImage'></image>
              </view>
              <input type='text' 
                    class='nickname-input'
                    wx:if="{{hiddenLeftInput==false}}" 
                    placeholder="昵称"
                    data-type='0'
                    bindblur="loseCous"
                    value='{{leftValue}}'          
                    bindinput='getNickname'/>
              <view class='member-nickname' 
                    data-type='0'
                    bindtap='showInputView'
                    wx:if="{{hiddenLeftInput==true}}">{{leftUser.nickname}}</view>
            </view>
          </view>
          <view class='member-right'>
            <view class='right-member-view'>
              <view class='right-member-avatar'>
                <image src='/images/select-image.png' 
                      wx:if="{{rightUser.avatar==''}}" 
                      data-type='1' 
                      bindtap='selectImage'></image>
                <image src='{{rightUser.avatar}}' 
                      mode='aspectFill' 
                      wx:if="{{rightUser.avatar!=''}}" 
                      data-type='1' 
                      bindtap='selectImage'></image>
              </view>
              <input type='text' 
                    class='nickname-input'
                    wx:if="{{hiddenRightInput==false}}"
                    data-type='1'
                    value='{{rightValue}}'
                    bindblur="loseCous"   
                    placeholder="昵称"         
                    bindinput='getNickname'/>
              <view class='member-nickname'
                    data-type='1'
                    bindtap='showInputView' 
                    wx:if="{{hiddenRightInput==true}}">{{rightUser.nickname}}</view>
            </view>
            <view class='select-member' data-type='1' bindtap='selectChatUser'>
                <image src='/images/select-icon.png' wx:if="{{selectUser!=1}}"></image>
              <image src='/images/select-choose.png' wx:if="{{selectUser==1}}"></image>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- 添加消息内容 -->
    <view class='operate-container' wx:if="{{showOperate}}">
      <view class='operate-content'>

        <view class='operate-item' bindtap='showCreateView' data-type='1'>
          <view class='image-wall'><image src='/images/wx-txt.png'></image></view>
          <view class='item-txt'>添加文字</view>
        </view>

        <view class='operate-item' bindtap='showCreateView' data-type='2'>
          <view class='image-wall'><image src='/images/wx-image.png'></image></view>
          <view class='item-txt'>添加图片</view>
        </view>

        <view class='operate-item'>
          <view class='image-wall'><image src='/images/wx-sound-img.png'></image></view>
          <view class='item-txt'>添加语音</view>
        </view>

        <view class='operate-item'>
          <view class='image-wall'><image src='/images/wx-image.png'></image></view>
          <view class='item-txt'>添加时间</view>
        </view>

        <view class='operate-item' bindtap='showCreateView' data-type='5'>
          <view class='image-wall'><image src='/images/wx-rp.png'></image></view>
          <view class='item-txt'>发红包</view>
        </view>

        <view class='operate-item' bindtap='showCreateView' data-type='6'>
          <view class='image-wall'><image src='/images/wx-rp.png'></image></view>
          <view class='item-txt'>领红包</view>
        </view>

        <view class='operate-item'>
          <view class='image-wall'><image src='/images/wx-tansport.png'></image></view>
          <view class='item-txt'>添加转账</view>
        </view>

      </view>
    </view>

  </view>

  <view class='create-view' wx:if="{{showCreateView}}">
    <view class='null-container' bindtap='closeCreateView'></view>
    <view class='create-container'>
      <!-- 添加文字信息 -->
      <view class='create-text' wx:if="{{messageType==1}}">
        <textarea 
          maxlength="1024"
          class='text-input'
          placeholder="输入内容"    
          bindinput="getTextContent"/>
      </view>

      <!-- 发红包 -->
      <view class='create-sound' wx:if="{{messageType==5}}">
        <textarea 
          maxlength="1024"
          class='text-input'
          placeholder="输入祝福语"    
          bindinput="getRedTextContent"/>
      </view>

      <!-- 领红包 -->
      <view class='create-sound' wx:if="{{messageType==6}}">
        <textarea 
          maxlength="1024"
          class='text-input'
          placeholder="输入祝福语"    
          bindinput="getRedTextContent"/>
        <radio-group class="radio-group" bindchange="radioChange">
          <label class="radio">
            <radio value="1" checked="true" />
            小明
          </label>
        </radio-group>
      </view>

      <view class='create-button' bindtap='pushMessage'>添加</view>
    </view>
  </view>

</view>